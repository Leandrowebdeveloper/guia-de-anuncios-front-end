"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4490],{1562:(E,A,e)=>{e.d(A,{x:()=>P});var o=e(6895),l=e(433),p=e(9267),u=e(5203),v=e(5028),n=e(4650);const r=[{path:"",component:v.R}];let h=(()=>{class s{}return s.\u0275fac=function(a){return new(a||s)},s.\u0275mod=n.oAB({type:s}),s.\u0275inj=n.cJS({imports:[u.Bz.forChild(r),u.Bz]}),s})();var O=e(3493),f=e(2119);let P=(()=>{class s{}return s.\u0275fac=function(a){return new(a||s)},s.\u0275mod=n.oAB({type:s}),s.\u0275inj=n.cJS({imports:[o.ez,l.u5,p.Pc,h,f.h,O.d]}),s})()},5028:(E,A,e)=>{e.d(A,{R:()=>K});var o=e(655),l=e(8505),p=e(262),u=e(7579),v=e(515),n=e(4650),r=e(9267),h=e(5866),O=e(1228),f=e(1395),P=e(6388),s=e(8039),i=e(6895),a=e(4759),c=e(5620),C=e(1635);function M(d,x){if(1&d){const t=n.EpF();n.TgZ(0,"ion-fab",1)(1,"ion-fab-button",2),n.NdJ("click",function(){n.CHM(t);const _=n.oxw();return n.KtG(_.createAnnouncement())}),n._UZ(2,"ion-icon",3),n.qZA()()}}let I=(()=>{class d{constructor(t){this.modalController=t}createAnnouncement(){var t,g;return(0,o.mG)(this,void 0,void 0,function*(){if(this.user)return yield(yield this.modalController.create({component:C.A,componentProps:{action:"announcement",label:"Cadastrar an\xfancio",announcement:{_csrf:null===(t=this.user)||void 0===t?void 0:t._csrf,title:null,description:null,userId:null===(g=this.user)||void 0===g?void 0:g.id}}})).present()})}}return d.\u0275fac=function(t){return new(t||d)(n.Y36(r.IN))},d.\u0275cmp=n.Xpm({type:d,selectors:[["app-admin-button-create-announcement"]],inputs:{user:"user",isAdmin:"isAdmin"},decls:1,vars:1,consts:[["vertical","top","horizontal","end","title","Cadastrar novo an\xfancio.","slot","fixed",4,"ngIf"],["vertical","top","horizontal","end","title","Cadastrar novo an\xfancio.","slot","fixed"],["size","small",3,"click"],["name","add"]],template:function(t,g){1&t&&n.YNc(0,M,3,0,"ion-fab",0),2&t&&n.Q6J("ngIf",g.isAdmin)},dependencies:[i.O5,r.IJ,r.W4,r.gu]}),d})();var Z=e(2339);function U(d,x){if(1&d&&(n.TgZ(0,"ion-col",8),n._UZ(1,"app-card-announcement-component",9),n.qZA()),2&d){const t=x.$implicit;n.xp6(1),n.Q6J("announcement",t)}}function B(d,x){if(1&d&&(n.TgZ(0,"ion-row"),n.YNc(1,U,2,1,"ion-col",2),n.TgZ(2,"ion-col",3),n.ALo(3,"isAnnouncement"),n.TgZ(4,"div",4),n._UZ(5,"ion-icon",5),n.TgZ(6,"ion-text",6),n._uU(7," N\xe3o \xe1 an\xfancio cadastrado. "),n.qZA()()(),n._UZ(8,"app-admin-button-create-announcement",7),n.qZA()),2&d){const t=n.oxw();n.xp6(1),n.Q6J("ngForOf",t.announcement),n.xp6(1),n.Q6J("hidden",n.xi3(3,4,t.announcement,0)||!t.isAdmin),n.xp6(6),n.Q6J("isAdmin",t.isAdmin)("user",t.user)}}const F=function(d){return{hide:d}};function z(d,x){if(1&d){const t=n.EpF();n.TgZ(0,"ion-row")(1,"ion-col",11)(2,"div",4)(3,"div")(4,"ion-text",12)(5,"p",13),n._uU(6,"Erro ao carregar an\xfancios."),n.qZA()(),n.TgZ(7,"ion-refresher",14),n.NdJ("ionRefresh",function(_){n.CHM(t);const m=n.oxw(2);return n.KtG(m.refresher(_))}),n._UZ(8,"ion-refresher-content",15),n.qZA(),n.TgZ(9,"ion-text",12)(10,"ion-button",16),n.NdJ("mousedown",function(){n.CHM(t);const _=n.oxw(2);return n.KtG(_.hideMenssage())}),n._uU(11,"Puxe para atualizar "),n._UZ(12,"ion-icon",17),n.qZA()()()()()()}if(2&d){const t=n.oxw(2);n.xp6(5),n.Q6J("ngClass",n.VKq(1,F,t.menssage))}}function R(d,x){1&d&&n._UZ(0,"app-skeleton-announcement")}function L(d,x){if(1&d&&(n.YNc(0,z,13,3,"ion-row",0),n.ALo(1,"async"),n.YNc(2,R,1,0,"ng-template",null,10,n.W1O)),2&d){const t=n.MAs(3),g=n.oxw();n.Q6J("ngIf",n.lcZ(1,2,g.error))("ngIfElse",t)}}let K=(()=>{class d{constructor(t,g,_,m,T,y){this.plt=t,this.authAnnouncementService=g,this.authService=_,this.alertService=m,this.messageService=T,this.loadingService=y,this.isAnnouncement=new n.vpe(void 0),this.error=new u.x,this.limit=12,this.offset=0}ngOnInit(){this.getAnnouncement(),this.isPlatform(),this.setButtonCreate()}refresher(t){this.getAnnouncement(),t.target.complete()}hideMenssage(){this.menssage=!0}actionButton(t){const{action:g,index:_,announcement:m}=t;if("destroy"===g)return this.destroy(_,m)}destroy(t,g){return(0,o.mG)(this,void 0,void 0,function*(){this.isDeleted=t,yield(yield this.alertService.alertController.create({header:"Aten\xe7\xe3o",message:"Este an\xfancio ser\xe1 enviado para a lixeira.",buttons:[{text:"Cancelar",role:"cancel",handler:()=>{this.isDeleted=-1}},{text:"Ok",role:"confirm",handler:()=>this.deleted(g,t)}]})).present()})}removeItem(t){setTimeout(()=>{this.isDeleted=-1,this.announcement.splice(t,1)},6e3)}getAnnouncement(){var t,g;if(null!==(t=this.user)&&void 0!==t&&t.id)return this.announcement$=this.authAnnouncementService.getAnnouncementAll("get",{limit:this.limit,offset:this.offset,userId:null===(g=this.user)||void 0===g?void 0:g.id}).pipe((0,l.b)(_=>{this.isAnnouncement.emit(_.length>0),this.announcement=_.map(m=>{var T,y,D,b,S;return m.category=Object.assign({},null===(T=m?.categoryAnnouncement)||void 0===T?void 0:T.category),null==m||delete m.announcement,null===(y=m?.categoryAnnouncement)||void 0===y||delete y.catAdId,null===(D=m?.categoryAnnouncement)||void 0===D||delete D.category,null===(b=m?.categoryAnnouncement)||void 0===b||delete b.announcementId,null===(S=m?.categoryAnnouncement)||void 0===S||delete S.message,m})}),(0,p.K)(_=>(setTimeout(()=>this.menssage=!1,300),this.error.next(!0),v.E)))}deleted(t,g){const _=this.loadingService.show("Enviando para lixeira...");this.destroyAnnouncement=this.authAnnouncementService.delete(t).subscribe({next:m=>this.success(g,m,_),error:m=>this.messageService.error(m,_,this.destroyAnnouncement)})}success(t,g,_){this.removeItem(t),this.message(g,_)}message(t,g){t?.message&&this.messageService.success(t?.message,g,this.destroyAnnouncement,2e3)}isPlatform(){return(0,o.mG)(this,void 0,void 0,function*(){return this.plt.ready().then(()=>this.isDesktop=this.plt.is("desktop"))})}setButtonCreate(){this.isAdmin="1"===this.authService.getLevel}}return d.\u0275fac=function(t){return new(t||d)(n.Y36(r.t4),n.Y36(h.X),n.Y36(O.e),n.Y36(f.c),n.Y36(P.e),n.Y36(s.b))},d.\u0275cmp=n.Xpm({type:d,selectors:[["app-enabled-item-announcement-page"]],inputs:{user:"user"},outputs:{isAnnouncement:"isAnnouncement"},decls:4,vars:4,consts:[[4,"ngIf","ngIfElse"],["Loading",""],["size-xl","6","size-lg","6","size-md","12","size-sm","12","size","12",4,"ngFor","ngForOf"],["size","12",3,"hidden"],[1,"content-center"],["color","medium","name","megaphone"],["color","medium"],[3,"isAdmin","user"],["size-xl","6","size-lg","6","size-md","12","size-sm","12","size","12"],[3,"announcement"],["loadingNoError",""],["size","12"],[1,"ion-text-center"],[3,"ngClass"],["slot","fixed",3,"ionRefresh"],["pullingIcon","chevron-down-circle-outline","pullingText","Puxe para baixo","refreshingSpinner","circles","refreshingText","Atualizar..."],[3,"mousedown"],["name","arrow-down-circle",1,"ion-margin-start"]],template:function(t,g){if(1&t&&(n.YNc(0,B,9,7,"ion-row",0),n.ALo(1,"async"),n.YNc(2,L,4,4,"ng-template",null,1,n.W1O)),2&t){const _=n.MAs(3);n.Q6J("ngIf",n.lcZ(1,2,g.announcement$))("ngIfElse",_)}},dependencies:[i.mk,i.sg,i.O5,r.YG,r.wI,r.gu,r.nJ,r.Wo,r.Nd,r.yW,a._,c.r,I,i.Ov,Z.Q],styles:[".content-center[_ngcontent-%COMP%]{font-size:1em}.content-center[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:2.5em}","ul[_ngcontent-%COMP%]{list-style-type:none}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:flex;align-items:center;padding-top:4px;padding-bottom:4px}ul[_ngcontent-%COMP%]   li.flex-start[_ngcontent-%COMP%]{align-items:flex-start}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-right:8px}ion-card-subtitle[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding-left:0}.state[_ngcontent-%COMP%]{display:flex;align-items:center;padding-top:4px;padding-bottom:4px}.state.flex-start[_ngcontent-%COMP%]{align-items:flex-start}.state[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-right:8px}a[_ngcontent-%COMP%]{text-decoration:none}ion-accordion[_ngcontent-%COMP%]{border-radius:5px}.row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;flex-wrap:wrap}.row[_ngcontent-%COMP%]   dl[_ngcontent-%COMP%]{flex:0 0 150px}.row[_ngcontent-%COMP%]   dl[_ngcontent-%COMP%]   dt[_ngcontent-%COMP%]{margin-bottom:8px}.row[_ngcontent-%COMP%]   dl[_ngcontent-%COMP%]   dd[_ngcontent-%COMP%]{padding-top:4px;margin-left:16px;font-size:x-small}"]}),d})()},5866:(E,A,e)=>{e.d(A,{X:()=>O});var o=e(8505),l=e(1135),p=e(3755),u=e(4650),v=e(529),n=e(6578),r=e(6388),h=e(9267);let O=(()=>{class f extends p.O{constructor(s,i,a,c){super(s,i),this.http=s,this.storageService=i,this.messageService=a,this.navCtrl=c,this.announcement=new l.X([]),this.setApi="announcement"}get announcementObservable(){return this.announcement.asObservable()}get getAnnouncement(){return this.announcement.value}set setAnnouncement(s){this.announcement.next(s)}set deleteAnnouncement(s){var i;const a=this.getAnnouncement.findIndex(c=>c?.id===s?.id);this.announcement.value.splice(a,1),this.setAnnouncement=null===(i=this.announcement)||void 0===i?void 0:i.value}set setDataAnnouncement(s){var i;const a=this.getAnnouncement.findIndex(c=>c?.id===s?.id);this.announcement.value[a]=s,this.setAnnouncement=null===(i=this.announcement)||void 0===i?void 0:i.value}set setCsrf(s){this.csrf=s}createAnnouncement(s){return this.create(s).pipe((0,o.b)(i=>{var a;return(null===(a=this.getAnnouncement)||void 0===a?void 0:a.length)>0?(this.getAnnouncement.unshift(i),this.setAnnouncement=this.getAnnouncement):this.setAnnouncement=[i],this.navCtrl.navigateBack(["/painel-de-controle","anuncio",i.slug])}))}delete(s){const{id:i,_csrf:a}=s;return this.destroy({id:i,_csrf:a},"management/")}drop(s){const{id:i,_csrf:a}=s;return this.destroy({id:i,_csrf:a},"management/drop")}toRestore(s){const{id:i,_csrf:a}=s;return this.patch({id:i,_csrf:a},"management/to-restore")}getAnnouncementAll(s,i){return this.index(`management/${s}`,Object.assign({},i))}getAnnouncementFindOne(s){return this.index("management/get",s)}}return f.\u0275fac=function(s){return new(s||f)(u.LFG(v.eN),u.LFG(n.V),u.LFG(r.e),u.LFG(h.SH))},f.\u0275prov=u.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"}),f})()},1635:(E,A,e)=>{e.d(A,{A:()=>f});var o=e(4650),l=e(3131),p=e(9267),u=e(5866),v=e(4111),n=e(6388),r=e(8039),h=e(1616),O=e(8404);let f=(()=>{class P{constructor(i,a,c,C,M,I){this.helpService=i,this.modalController=a,this.authAnnouncementService=c,this.managementAnnouncementService=C,this.messageService=M,this.loadingService=I,this.attrButton={route:"/announcement",icon:"cloud-upload",label:"Salvar",aria:"Salvar an\xfancio.",title:"Salvar an\xfancio."}}ngOnInit(){this.getData()}importForm(i){return this.form=i}onSubmit(i){var a,c,C;let M;null!==(a=this.announcement)&&void 0!==a&&a.id?(i.value.id=null===(c=this.announcement)||void 0===c?void 0:c.id,M="Editando an\xfancio..."):(i.value.userId=null===(C=this.announcement)||void 0===C?void 0:C.userId,M="Cadastrando an\xfancio...");const I=this.loadingService.show(M);return this.send(i,I)}send(i,a){return this.$announcement=i.value.id?this.managementAnnouncementService.updateAnnouncement(i.value).subscribe({next:c=>c?.message&&this.messsage(c?.message,a),error:c=>this.messageService.error(c,a,this.$announcement)}):this.authAnnouncementService.createAnnouncement(i.value).subscribe({next:c=>c?.message&&this.messsage(c?.message,a),error:c=>this.messageService.error(c,a,this.$announcement)})}messsage(i,a){return this.helpService.delay(()=>this.modalController.dismiss(),2500),this.messageService.success(i,a,this.$announcement)}getData(){this.config=Object.assign({},this.announcement)}}return P.\u0275fac=function(i){return new(i||P)(o.Y36(l.f),o.Y36(p.IN),o.Y36(u.X),o.Y36(v.O),o.Y36(n.e),o.Y36(r.b))},P.\u0275cmp=o.Xpm({type:P,selectors:[["ng-component"]],inputs:{announcement:"announcement",action:"action",label:"label"},decls:4,vars:4,consts:[[3,"label"],[3,"fullscreen"],["fixed",""],[3,"inputConfig","attrButton","submitDataForm","exportForm"]],template:function(i,a){1&i&&(o._UZ(0,"app-header-component-modal",0),o.TgZ(1,"ion-content",1)(2,"ion-grid",2)(3,"app-form",3),o.NdJ("submitDataForm",function(C){return a.onSubmit(C)})("exportForm",function(C){return a.importForm(C)}),o.qZA()()()),2&i&&(o.Q6J("label",a.label),o.xp6(1),o.Q6J("fullscreen",!0),o.xp6(2),o.Q6J("inputConfig",a.config)("attrButton",a.attrButton))},dependencies:[p.W2,p.jY,h.U,O.s],styles:["ion-content[_ngcontent-%COMP%]{--padding-top: 0px !important}"]}),P})()},9353:(E,A,e)=>{e.d(A,{A:()=>p});var o=e(9267),l=e(4650);let p=(()=>{class u{constructor(){this.togglePage=new l.vpe(!0)}ngOnDestroy(){this.segmentIonChange.unsubscribe()}ngOnInit(){this.init(),this.toggleSegment()}toggleSegment(){return this.segmentIonChange=this.segment.ionChange.subscribe({next:n=>{var r;const h="enabled"===(null===(r=n?.detail)||void 0===r?void 0:r.value);this.togglePage.emit(h)}})}init(){return this.togglePage.emit(!0)}}return u.\u0275fac=function(n){return new(n||u)},u.\u0275cmp=l.Xpm({type:u,selectors:[["app-segment-announcement-component"]],viewQuery:function(n,r){if(1&n&&l.Gf(o.cJ,7),2&n){let h;l.iGM(h=l.CRH())&&(r.segment=h.first)}},inputs:{isAdmin:"isAdmin"},outputs:{togglePage:"togglePage"},decls:11,vars:3,consts:[["size-xl","11","size-lg","11","size-sm","11","size-md","11","size-xs","11"],["color","dark","value","enabled",3,"mode"],["title","An\xfancios abilitados","value","enabled"],["name","checkmark-done"],[3,"hidden"],["title","An\xfancios excluidas","value","deleted"],["name","trash"]],template:function(n,r){1&n&&(l.TgZ(0,"ion-row")(1,"ion-col",0)(2,"ion-segment",1)(3,"ion-segment-button",2),l._UZ(4,"ion-icon",3),l.TgZ(5,"ion-label",4),l._uU(6,"Abilitados"),l.qZA()(),l.TgZ(7,"ion-segment-button",5),l._UZ(8,"ion-icon",6),l.TgZ(9,"ion-label",4),l._uU(10,"Excluidos"),l.qZA()()()()()),2&n&&(l.xp6(2),l.Q6J("mode",r.isAdmin&&"ios"),l.xp6(3),l.Q6J("hidden",r.isAdmin),l.xp6(4),l.Q6J("hidden",r.isAdmin))},dependencies:[o.wI,o.gu,o.Q$,o.Nd,o.cJ,o.GO,o.QI]}),u})()},4759:(E,A,e)=>{e.d(A,{_:()=>v});var o=e(4650),l=e(6895),p=e(9267);function u(n,r){1&n&&(o.TgZ(0,"ion-col",2)(1,"div",3),o._UZ(2,"ion-skeleton-text",4)(3,"ion-skeleton-text",5),o.TgZ(4,"div",6),o._UZ(5,"ion-skeleton-text",7)(6,"ion-skeleton-text",7),o.qZA(),o.TgZ(7,"div"),o._UZ(8,"ion-skeleton-text",7)(9,"ion-skeleton-text",7),o.qZA()()())}let v=(()=>{class n{constructor(){this.sizeSkeleton=[1,2,3,4,5,6,7,8,9,10,11,12]}ngOnInit(){}}return n.\u0275fac=function(h){return new(h||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-skeleton-announcement"]],decls:2,vars:1,consts:[[1,"ion-margin-top"],["size-xl","4","size-lg","4","size-md","6","size-sm","6","size","12","class","ion-margin-bottom",4,"ngFor","ngForOf"],["size-xl","4","size-lg","4","size-md","6","size-sm","6","size","12",1,"ion-margin-bottom"],[1,"skeleton"],["animated","",1,"title"],["animated","",1,"category"],[1,"fab"],["animated",""]],template:function(h,O){1&h&&(o.TgZ(0,"ion-row",0),o.YNc(1,u,10,0,"ion-col",1),o.qZA()),2&h&&(o.xp6(1),o.Q6J("ngForOf",O.sizeSkeleton))},dependencies:[l.sg,p.wI,p.Nd,p.CK],styles:[".skeleton[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;align-items:center;flex-wrap:wrap}.skeleton[_ngcontent-%COMP%]   div.fab[_ngcontent-%COMP%]   ion-skeleton-text[_ngcontent-%COMP%]{flex:1;border-radius:50px;height:24px;margin:6px 8px 6px 0;max-width:90px}.skeleton[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   ion-skeleton-text[_ngcontent-%COMP%]{flex:1;height:32px;margin:6px 8px 6px 0;width:100%}.skeleton[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{height:24px;max-width:220px;border-end-end-radius:20px;border-top-right-radius:2px}.skeleton[_ngcontent-%COMP%]   .category[_ngcontent-%COMP%]{height:12px;max-width:70px;border-end-end-radius:20px;border-top-right-radius:2px}"]}),n})()},6819:(E,A,e)=>{e.d(A,{q:()=>p});var o=e(9666),l=e(4650);let p=(()=>{class u{transform(n){return o.f.formatAddress(n)}}return u.\u0275fac=function(n){return new(n||u)},u.\u0275pipe=l.Yjl({name:"address",type:u,pure:!0}),u})()},2339:(E,A,e)=>{e.d(A,{Q:()=>l});var o=e(4650);let l=(()=>{class p{transform(v,n=0){return!!(v&&v?.length>n)}}return p.\u0275fac=function(v){return new(v||p)},p.\u0275pipe=o.Yjl({name:"isAnnouncement",type:p,pure:!0}),p})()}}]);