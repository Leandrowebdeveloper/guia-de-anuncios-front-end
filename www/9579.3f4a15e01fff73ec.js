"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9579],{1562:(P,v,t)=>{t.d(v,{x:()=>O});var i=t(6895),r=t(433),p=t(9267),u=t(5203),h=t(5028),n=t(4650);const a=[{path:"",component:h.R}];let d=(()=>{class m{}return m.\u0275fac=function(f){return new(f||m)},m.\u0275mod=n.oAB({type:m}),m.\u0275inj=n.cJS({imports:[u.Bz.forChild(a),u.Bz]}),m})();var x=t(4154);let O=(()=>{class m{}return m.\u0275fac=function(f){return new(f||m)},m.\u0275mod=n.oAB({type:m}),m.\u0275inj=n.cJS({imports:[i.ez,r.u5,p.Pc,d,x.h]}),m})()},5028:(P,v,t)=>{t.d(v,{R:()=>N});var i=t(655),r=t(8505),p=t(262),u=t(7579),h=t(515),n=t(4650),a=t(9267),d=t(5866),x=t(1228),O=t(1395),m=t(6388),A=t(8039),f=t(6895),I=t(4759),E=t(4859),Z=t(1635);function z(s,g){if(1&s){const e=n.EpF();n.TgZ(0,"ion-fab",1)(1,"ion-fab-button",2),n.NdJ("click",function(){n.CHM(e);const c=n.oxw();return n.KtG(c.createAnnouncement())}),n._UZ(2,"ion-icon",3),n.qZA()()}}let T=(()=>{class s{constructor(e){this.modalController=e}createAnnouncement(){var e,l;return(0,i.mG)(this,void 0,void 0,function*(){return yield(yield this.modalController.create({component:Z.A,componentProps:{action:"announcement",label:"Cadastrar an\xfancio",announcement:{_csrf:null===(e=this.user)||void 0===e?void 0:e._csrf,title:null,description:null,userId:null===(l=this.user)||void 0===l?void 0:l.id}}})).present()})}}return s.\u0275fac=function(e){return new(e||s)(n.Y36(a.IN))},s.\u0275cmp=n.Xpm({type:s,selectors:[["app-admin-button-create-announcement"]],inputs:{user:"user",isAdmin:"isAdmin"},decls:1,vars:1,consts:[["vertical","top","horizontal","end","title","Cadastrar novo an\xfancio.","slot","fixed",4,"ngIf"],["vertical","top","horizontal","end","title","Cadastrar novo an\xfancio.","slot","fixed"],["size","small",3,"click"],["name","add"]],template:function(e,l){1&e&&n.YNc(0,z,3,0,"ion-fab",0),2&e&&n.Q6J("ngIf",l.isAdmin)},dependencies:[f.O5,a.IJ,a.W4,a.gu]}),s})();function S(s,g){if(1&s&&(n.TgZ(0,"ion-col",8),n._UZ(1,"app-card-announcement-component",9),n.qZA()),2&s){const e=g.$implicit;n.xp6(1),n.Q6J("announcement",e)}}function w(s,g){if(1&s&&(n.TgZ(0,"ion-row"),n.YNc(1,S,2,1,"ion-col",2),n.TgZ(2,"ion-col",3)(3,"div",4),n._UZ(4,"ion-icon",5),n.TgZ(5,"ion-text",6),n._uU(6," N\xe3o \xe1 an\xfancio cadastrado. "),n.qZA()()(),n._UZ(7,"app-admin-button-create-announcement",7),n.qZA()),2&s){const e=n.oxw();n.xp6(1),n.Q6J("ngForOf",e.announcement),n.xp6(1),n.Q6J("hidden",(null==e.announcement?null:e.announcement.length)>0||!e.isAdmin),n.xp6(5),n.Q6J("isAdmin",e.isAdmin)("user",e.user)}}const U=function(s){return{hide:s}};function J(s,g){if(1&s){const e=n.EpF();n.TgZ(0,"ion-row")(1,"ion-col",11)(2,"div",4)(3,"div")(4,"ion-text",12)(5,"p",13),n._uU(6,"Erro ao carregar an\xfancios."),n.qZA()(),n.TgZ(7,"ion-refresher",14),n.NdJ("ionRefresh",function(c){n.CHM(e);const o=n.oxw(2);return n.KtG(o.refresher(c))}),n._UZ(8,"ion-refresher-content",15),n.qZA(),n.TgZ(9,"ion-text",12)(10,"ion-button",16),n.NdJ("mousedown",function(){n.CHM(e);const c=n.oxw(2);return n.KtG(c.hideMenssage())}),n._uU(11,"Puxe para atualizar "),n._UZ(12,"ion-icon",17),n.qZA()()()()()()}if(2&s){const e=n.oxw(2);n.xp6(5),n.Q6J("ngClass",n.VKq(1,U,e.menssage))}}function F(s,g){1&s&&n._UZ(0,"app-skeleton-announcement")}function B(s,g){if(1&s&&(n.YNc(0,J,13,3,"ion-row",0),n.ALo(1,"async"),n.YNc(2,F,1,0,"ng-template",null,10,n.W1O)),2&s){const e=n.MAs(3),l=n.oxw();n.Q6J("ngIf",n.lcZ(1,2,l.error))("ngIfElse",e)}}let N=(()=>{class s{constructor(e,l,c,o,C,_){this.plt=e,this.authAnnouncementService=l,this.authService=c,this.alertService=o,this.messageService=C,this.loadingService=_,this.isAnnouncement=new n.vpe(void 0),this.error=new u.x,this.limit=12,this.offset=0}ngOnInit(){this.getAnnouncement(),this.isPlatform(),this.setButtonCreate()}refresher(e){this.getAnnouncement(),e.target.complete()}hideMenssage(){this.menssage=!0}actionButton(e){const{action:l,index:c,announcement:o}=e;if("destroy"===l)return this.destroy(c,o)}destroy(e,l){return(0,i.mG)(this,void 0,void 0,function*(){this.isDeleted=e,yield(yield this.alertService.alertController.create({header:"Aten\xe7\xe3o",message:"Este an\xfancio ser\xe1 enviado para a lixeira.",buttons:[{text:"Cancelar",role:"cancel",handler:()=>{this.isDeleted=-1}},{text:"Ok",role:"confirm",handler:()=>this.deleted(l,e)}]})).present()})}removeItem(e){setTimeout(()=>{this.isDeleted=-1,this.announcement.splice(e,1)},6e3)}getAnnouncement(){var e,l;if(null!==(e=this.user)&&void 0!==e&&e.id)return this.announcement$=this.authAnnouncementService.getAnnouncementAll("get",{limit:this.limit,offset:this.offset,userId:null===(l=this.user)||void 0===l?void 0:l.id}).pipe((0,r.b)(c=>{this.isAnnouncement.emit(c.length>0),this.announcement=c.map(o=>{var C,_,M,b,y;return o.category=Object.assign({},null===(C=o?.categoryAnnouncement)||void 0===C?void 0:C.category),null==o||delete o.announcement,null===(_=o?.categoryAnnouncement)||void 0===_||delete _.catAdId,null===(M=o?.categoryAnnouncement)||void 0===M||delete M.category,null===(b=o?.categoryAnnouncement)||void 0===b||delete b.announcementId,null===(y=o?.categoryAnnouncement)||void 0===y||delete y.message,o})}),(0,p.K)(c=>(setTimeout(()=>this.menssage=!1,300),this.error.next(!0),h.E)))}deleted(e,l){const c=this.loadingService.show("Enviando para lixeira...");this.destroyAnnouncement=this.authAnnouncementService.delete(e).subscribe({next:o=>this.success(l,o,c),error:o=>this.messageService.error(o,c,this.destroyAnnouncement)})}success(e,l,c){this.removeItem(e),this.message(l,c)}message(e,l){this.messageService.success(e.message,l,this.destroyAnnouncement,2e3)}isPlatform(){return(0,i.mG)(this,void 0,void 0,function*(){return this.plt.ready().then(()=>this.isDesktop=this.plt.is("desktop"))})}setButtonCreate(){this.isAdmin="1"===this.authService.getLevel}}return s.\u0275fac=function(e){return new(e||s)(n.Y36(a.t4),n.Y36(d.X),n.Y36(x.e),n.Y36(O.c),n.Y36(m.e),n.Y36(A.b))},s.\u0275cmp=n.Xpm({type:s,selectors:[["app-enabled-item-announcement-page"]],inputs:{user:"user"},outputs:{isAnnouncement:"isAnnouncement"},decls:4,vars:4,consts:[[4,"ngIf","ngIfElse"],["Loading",""],["size-xl","6","size-lg","6","size-md","12","size-sm","12","size","12",4,"ngFor","ngForOf"],["size","12",3,"hidden"],[1,"content-center"],["color","medium","name","megaphone"],["color","medium"],[3,"isAdmin","user"],["size-xl","6","size-lg","6","size-md","12","size-sm","12","size","12"],[3,"announcement"],["loadingNoError",""],["size","12"],[1,"ion-text-center"],[3,"ngClass"],["slot","fixed",3,"ionRefresh"],["pullingIcon","chevron-down-circle-outline","pullingText","Puxe para baixo","refreshingSpinner","circles","refreshingText","Atualizar..."],[3,"mousedown"],["name","arrow-down-circle",1,"ion-margin-start"]],template:function(e,l){if(1&e&&(n.YNc(0,w,8,4,"ion-row",0),n.ALo(1,"async"),n.YNc(2,B,4,4,"ng-template",null,1,n.W1O)),2&e){const c=n.MAs(3);n.Q6J("ngIf",n.lcZ(1,2,l.announcement$))("ngIfElse",c)}},dependencies:[f.mk,f.sg,f.O5,a.YG,a.wI,a.gu,a.nJ,a.Wo,a.Nd,a.yW,I._,E.r,T,f.Ov],styles:[".content-center[_ngcontent-%COMP%]{font-size:1em}.content-center[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:2.5em}","ul[_ngcontent-%COMP%]{list-style-type:none}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:flex;align-items:center;padding-top:4px;padding-bottom:4px}ul[_ngcontent-%COMP%]   li.flex-start[_ngcontent-%COMP%]{align-items:flex-start}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-right:8px}ion-card-subtitle[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding-left:0}.state[_ngcontent-%COMP%]{display:flex;align-items:center;padding-top:4px;padding-bottom:4px}.state.flex-start[_ngcontent-%COMP%]{align-items:flex-start}.state[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-right:8px}a[_ngcontent-%COMP%]{text-decoration:none}ion-accordion[_ngcontent-%COMP%]{border-radius:5px}.row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;flex-wrap:wrap}.row[_ngcontent-%COMP%]   dl[_ngcontent-%COMP%]{flex:0 0 150px}.row[_ngcontent-%COMP%]   dl[_ngcontent-%COMP%]   dt[_ngcontent-%COMP%]{margin-bottom:8px}.row[_ngcontent-%COMP%]   dl[_ngcontent-%COMP%]   dd[_ngcontent-%COMP%]{padding-top:4px;margin-left:16px;font-size:x-small}"]}),s})()},9353:(P,v,t)=>{t.d(v,{A:()=>p});var i=t(9267),r=t(4650);let p=(()=>{class u{constructor(){this.togglePage=new r.vpe(!0)}ngOnDestroy(){this.segmentIonChange.unsubscribe()}ngOnInit(){this.init(),this.toggleSegment()}toggleSegment(){return this.segmentIonChange=this.segment.ionChange.subscribe({next:n=>{var a;const d="enabled"===(null===(a=n?.detail)||void 0===a?void 0:a.value);this.togglePage.emit(d)}})}init(){return this.togglePage.emit(!0)}}return u.\u0275fac=function(n){return new(n||u)},u.\u0275cmp=r.Xpm({type:u,selectors:[["app-segment-announcement-component"]],viewQuery:function(n,a){if(1&n&&r.Gf(i.cJ,7),2&n){let d;r.iGM(d=r.CRH())&&(a.segment=d.first)}},inputs:{isAdmin:"isAdmin"},outputs:{togglePage:"togglePage"},decls:11,vars:3,consts:[["size-xl","11","size-lg","11","size-sm","11","size-md","11","size-xs","11"],["color","dark","value","enabled",3,"mode"],["title","An\xfancios abilitados","value","enabled"],["name","checkmark-done"],[3,"hidden"],["title","An\xfancios excluidas","value","deleted"],["name","trash"]],template:function(n,a){1&n&&(r.TgZ(0,"ion-row")(1,"ion-col",0)(2,"ion-segment",1)(3,"ion-segment-button",2),r._UZ(4,"ion-icon",3),r.TgZ(5,"ion-label",4),r._uU(6,"Abilitados"),r.qZA()(),r.TgZ(7,"ion-segment-button",5),r._UZ(8,"ion-icon",6),r.TgZ(9,"ion-label",4),r._uU(10,"Excluidos"),r.qZA()()()()()),2&n&&(r.xp6(2),r.Q6J("mode",a.isAdmin&&"ios"),r.xp6(3),r.Q6J("hidden",a.isAdmin),r.xp6(4),r.Q6J("hidden",a.isAdmin))},dependencies:[i.wI,i.gu,i.Q$,i.Nd,i.cJ,i.GO,i.QI]}),u})()},4759:(P,v,t)=>{t.d(v,{_:()=>h});var i=t(4650),r=t(6895),p=t(9267);function u(n,a){1&n&&(i.TgZ(0,"ion-col",2)(1,"div",3),i._UZ(2,"ion-skeleton-text",4)(3,"ion-skeleton-text",5),i.TgZ(4,"div",6),i._UZ(5,"ion-skeleton-text",7)(6,"ion-skeleton-text",7),i.qZA(),i.TgZ(7,"div"),i._UZ(8,"ion-skeleton-text",7)(9,"ion-skeleton-text",7),i.qZA()()())}let h=(()=>{class n{constructor(){this.sizeSkeleton=[1,2,3,4,5,6,7,8,9,10,11,12]}ngOnInit(){}}return n.\u0275fac=function(d){return new(d||n)},n.\u0275cmp=i.Xpm({type:n,selectors:[["app-skeleton-announcement"]],decls:2,vars:1,consts:[[1,"ion-margin-top"],["size-xl","4","size-lg","4","size-md","6","size-sm","6","size","12","class","ion-margin-bottom",4,"ngFor","ngForOf"],["size-xl","4","size-lg","4","size-md","6","size-sm","6","size","12",1,"ion-margin-bottom"],[1,"skeleton"],["animated","",1,"title"],["animated","",1,"category"],[1,"fab"],["animated",""]],template:function(d,x){1&d&&(i.TgZ(0,"ion-row",0),i.YNc(1,u,10,0,"ion-col",1),i.qZA()),2&d&&(i.xp6(1),i.Q6J("ngForOf",x.sizeSkeleton))},dependencies:[r.sg,p.wI,p.Nd,p.CK],styles:[".skeleton[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;align-items:center;flex-wrap:wrap}.skeleton[_ngcontent-%COMP%]   div.fab[_ngcontent-%COMP%]   ion-skeleton-text[_ngcontent-%COMP%]{flex:1;border-radius:50px;height:24px;margin:6px 8px 6px 0;max-width:90px}.skeleton[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   ion-skeleton-text[_ngcontent-%COMP%]{flex:1;height:32px;margin:6px 8px 6px 0;width:100%}.skeleton[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{height:24px;max-width:220px;border-end-end-radius:20px;border-top-right-radius:2px}.skeleton[_ngcontent-%COMP%]   .category[_ngcontent-%COMP%]{height:12px;max-width:70px;border-end-end-radius:20px;border-top-right-radius:2px}"]}),n})()}}]);