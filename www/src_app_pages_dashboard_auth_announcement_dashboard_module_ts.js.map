{"version":3,"file":"src_app_pages_dashboard_auth_announcement_dashboard_module_ts.js","mappings":";;;;;;;;;;;;;;;;;;;;;AAAyC;AACc;AACgE;AAEtE;AACW;AACc;AAE1E,MAAMM,MAAM,GAAW,CACrB;EACEC,IAAI,EAAE,EAAE;EACRC,SAAS,EAAEL,0DAAa;EACxBM,OAAO,EAAE;IACPC,YAAY,EAAEN,qEAAmBA;;CAEpC,EACD;EACEG,IAAI,EAAE,OAAO;EACbI,WAAW,EAAE,CAACT,iIAAwB,CAAC;EACvCU,OAAO,EAAE,CAACV,iIAAwB,CAAC;EACnCO,OAAO,EAAE;IACPC,YAAY,EAAEL,mFAAiBA;GAChC;EACDQ,YAAY,EAAE,MACZ,keAA0C,CAACC,IAAI,CAC5CC,CAAC,IAAKA,CAAC,CAACC,sBAAsB;CAEpC,EACD;EACET,IAAI,EAAE,sBAAsB;EAC5BI,WAAW,EAAE,CAACT,iIAAwB,CAAC;EACvCU,OAAO,EAAE,CAACV,iIAAwB,CAAC;EACnCO,OAAO,EAAE;IACPC,YAAY,EAAEL,mFAAiBA;GAChC;EACDQ,YAAY,EAAE,MACZ,keAA0C,CAACC,IAAI,CAC5CC,CAAC,IAAKA,CAAC,CAACC,sBAAsB;CAEpC,CACF;AAOM,IAAMC,0BAA0B,GAAhC,MAAMA,0BAA0B,GAAG;AAA7BA,0BAA0B,sDALtCjB,uDAAQ,CAAC;EACRkB,OAAO,EAAE,CAACjB,kEAAqB,CAACK,MAAM,CAAC,CAAC;EACxCc,OAAO,EAAE,CAACnB,yDAAY,CAAC;EACvBoB,SAAS,EAAE,CAAChB,mFAAiB,EAAED,qEAAmB;CACnD,CAAC,GACWa,0BAA0B,CAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC/CK;AACF;AACJ;AAEI;AAE2B;AAEvB;AAEW;AACA;AACN;AACU;AACG;AACyD;AAgBrH,IAAMc,mBAAmB,GAAzB,MAAMA,mBAAmB,GAAG;AAAtBA,mBAAmB,sDAd/B/B,uDAAQ,CAAC;EACRkB,OAAO,EAAE,CACPI,0DAAY,EACZC,wDAAW,EACXC,wDAAW,EACXP,iFAA0B,EAC1BS,sEAAY,EACZD,sEAAY,EACZE,gEAAU,EACVG,sIAA4B,CAC7B;EACDE,YAAY,EAAE,CAAC7B,0DAAa,CAAC;EAC7BkB,SAAS,EAAE,CAACO,0EAAW,EAAEC,6EAAY;CACtC,CAAC,GACWE,mBAAmB,CAAG;;;;;;;;;;;;;;;;;;;;;;;;;;AC/BG;AACW;AAEC;AACe;AAO1D,IAAM5B,aAAa,GAAnB,MAAMA,aAAa;EAIxBkC,YACUC,WAAwB,EACxBC,cAA8B;IAD9B,gBAAW,GAAXD,WAAW;IACX,mBAAc,GAAdC,cAAc;EACrB;EAEHC,QAAQ;IACN,IAAI,CAACC,IAAI,EAAE;EACb;EAEOA,IAAI;IACT,IAAI,CAACC,gBAAgB,EAAE;IACvB,IAAI,CAACC,QAAQ,EAAE;EACjB;EAEQA,QAAQ;IACd,IAAI,IAAI,CAACL,WAAW,CAACM,OAAO,EAAE;MAC5B,IAAI,CAACC,IAAI,GAAG,IAAI,CAACP,WAAW,CAACM,OAAO;;EAExC;EAEQF,gBAAgB;;IACtB,IAAI,CAACI,aAAa,GAAGb,wCAAE,CACrB,sBAAI,CAACM,cAAc,0CAAEQ,QAAQ,0CAAEC,IAAI,0CAAG,cAAc,CAAC,CACtD;EACH;;;;;;;AA5BW7C,aAAa,sDALzBgC,wDAAS,CAAC;EACTc,QAAQ,EAAE,eAAe;EACzBC,UAAAA,4DAAoC;;CAErC,CAAC,GACW/C,aAAa,CA6BzB;;;;;;;;;;;;;;;;;;;;;;;ACvCqD;AACC;AACN;AAGgB;AACqD;AAG/G,IAAMC,mBAAmB,GAAzB,MAAMA,mBAAmB;EAG9BiC,YACUmB,uBAAgD,EAChDlB,WAAwB;IADxB,4BAAuB,GAAvBkB,uBAAuB;IACvB,gBAAW,GAAXlB,WAAW;EAClB;EAEHmB,WAAW;IACT,IAAI,CAACC,OAAO,CAACC,WAAW,EAAE;EAC5B;EAEA,IAAWC,MAAM;IACf,OAAO,IAAI,CAACC,OAAO;EACrB;EACA,IAAWD,MAAM,CAACE,KAAa;IAC7B,IAAI,CAACD,OAAO,GAAGC,KAAK;EACtB;EAEArD,OAAO;IACL,IAAI,CAACiD,OAAO,GAAG,IAAI,CAACpB,WAAW,CAACyB,cAAc,CAACC,SAAS,CAAC;MACvDC,IAAI,EAAGpB,IAAiB,IAAI;QAC1B,IAAIA,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEqB,EAAE,EAAE;UACZ,IAAI,CAACN,MAAM,GAAGf,IAAI,CAACqB,EAAE;;MAEzB;KACD,CAAC;IACF,IAAI,IAAI,CAACN,MAAM,EAAE;MACf,OAAO,IAAI,CAACJ,uBAAuB,CAChCW,sBAAsB,CAAC;QAAEP,MAAM,EAAE,IAAI,CAACA;MAAM,CAAE,CAAC,CAC/CQ,IAAI,CACHd,mDAAG,CAAEe,IAAI,IACPA,IAAI,CAACf,GAAG,CAAEN,IAAkB,IAAI;;QAC9BA,IAAI,CAACsB,QAAQ,GAAGC,gCACX,UAAI,aAAJvB,IAAI,uBAAJA,IAAI,CAAEwB,oBAAoB,0CAAEF,QAAQ;UACvCG,aAAa,EAAE,UAAI,aAAJzB,IAAI,uBAAJA,IAAI,CAAEwB,oBAAoB,0CAAEN;QAAE,EAClC;QACNlB,IAAI,aAAJA,IAAI,4BAAJA,IAAI,CAAEwB,oBAAoB;QAC1B,UAAI,aAAJxB,IAAI,uBAAJA,IAAI,CAAEH,IAAI,+CAAE6B,IAAI;QACvB,OAAO1B,IAAI;MACb,CAAC,CAAC,CACH,EACDK,0DAAU,CAAEsB,KAAwB,IAAI;QACtCC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC;QAClB,OAAOvB,uCAAK;MACd,CAAC,CAAC,CACH;;EAEP;;;;;;;AAhDWhD,mBAAmB,sDAD/B+C,yDAAU,EAAE,GACA/C,mBAAmB,CAiD/B;;;;;;;;;;;;;;;;;;;;;;ACzD0C;AAEF;AACQ;AAG+E;AAGzH,IAAMC,iBAAiB,GAAvB,MAAMA,iBAAiB;EAC5BgC,YACU2C,6BAA4D;IAA5D,kCAA6B,GAA7BA,6BAA6B;EACpC;EACHvE,OAAO,CAACwE,KAA6B;IACnC,MAAM;MAAEC,IAAI;MAAEC;IAAI,CAAE,GAAGF,KAAK,CAACG,MAAM;IACnC,IAAIF,IAAI,IAAI,CAACC,IAAI,EAAE;MACjB,OAAO,IAAI,CAACH,6BAA6B,CACtCK,OAAO,CAAC,yBAAyB,EAAE;QAAEH;MAAI,CAAE,CAAC,CAC5Cd,IAAI,CACHU,mDAAG,CAAE9B,IAAwB,IAAI;;QAC/B,IAAIA,IAAI,EAAE;UACRA,IAAI,CAACsB,QAAQ,GAAGC,kBACX,UAAI,aAAJvB,IAAI,uBAAJA,IAAI,CAAEwB,oBAAoB,0CAAEF,QAAQ,CAC5B;UACbtB,IAAI,CAAC0B,IAAI,GAAGH,kBACP,gBAAI,aAAJvB,IAAI,uBAAJA,IAAI,CAAEtC,YAAY,0CAAEmC,IAAI,0CAAE6B,IAAI,CAC1B;UACT1B,IAAI,CAACsC,UAAU,GAAGf,kBACb,gBAAI,aAAJvB,IAAI,uBAAJA,IAAI,CAAEtC,YAAY,0CAAEmC,IAAI,0CAAEyC,UAAU,CAC1B;UACRtC,IAAI,aAAJA,IAAI,4BAAJA,IAAI,CAAEtC,YAAY;UAClB,UAAI,aAAJsC,IAAI,uBAAJA,IAAI,CAAEwB,oBAAoB,+CAAEe,OAAO;UACnC,UAAI,aAAJvC,IAAI,uBAAJA,IAAI,CAAEwB,oBAAoB,+CAAEF,QAAQ;UACpC,UAAI,aAAJtB,IAAI,uBAAJA,IAAI,CAAEwB,oBAAoB,+CAAEgB,cAAc;UAC1C,UAAI,aAAJxC,IAAI,uBAAJA,IAAI,CAAEwB,oBAAoB,+CAAEiB,OAAO;UAC1C,IAAI,CAACT,6BAA6B,CAACU,eAAe,GAAG1C,IAAI;UACzD;;MAEJ,CAAC,CAAC,EACFK,0DAAU,CAAEsB,KAAwB,IAAI;QACtCC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC;QAClB,OAAOvB,uCAAK;MACd,CAAC,CAAC,CACH;;EAEP;;;;;AApCW/C,iBAAiB,sDAD7B8C,yDAAU,EAAE,GACA9C,iBAAiB,CAqC7B","sources":["./src/app/pages/dashboard/auth/announcement/dashboard-routing.module.ts","./src/app/pages/dashboard/auth/announcement/dashboard.module.ts","./src/app/pages/dashboard/auth/announcement/dashboard.page.ts","./src/app/pages/dashboard/auth/announcement/guard/resolve.guard.ts","./src/app/pages/dashboard/auth/announcement/management/guard/announcement.guard.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\nimport { PrivateAutorizationGuard } from 'src/app/services/auth/guard/private-autorization/private-autorization.guard';\n\nimport { DashboardPage } from './dashboard.page';\nimport { AnnouncementResolve } from './guard/resolve.guard';\nimport { AnnouncementGuard } from './management/guard/announcement.guard';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: DashboardPage,\n    resolve: {\n      announcement: AnnouncementResolve,\n    },\n  },\n  {\n    path: ':slug',\n    canActivate: [PrivateAutorizationGuard],\n    canLoad: [PrivateAutorizationGuard],\n    resolve: {\n      announcement: AnnouncementGuard,\n    },\n    loadChildren: () =>\n      import('./management/announcement.module').then(\n        (m) => m.AnnouncementPageModule\n      ),\n  },\n  {\n    path: ':slug/dias-da-semana',\n    canActivate: [PrivateAutorizationGuard],\n    canLoad: [PrivateAutorizationGuard],\n    resolve: {\n      announcement: AnnouncementGuard,\n    },\n    loadChildren: () =>\n      import('./management/announcement.module').then(\n        (m) => m.AnnouncementPageModule\n      ),\n  },\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n  providers: [AnnouncementGuard, AnnouncementResolve],\n})\nexport class DashboardPageRoutingModule {}\n","import { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { NgModule } from '@angular/core';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { DashboardPageRoutingModule } from './dashboard-routing.module';\n\nimport { DashboardPage } from './dashboard.page';\n\nimport { FooterModule } from 'src/app/footer/footer.module';\nimport { HeaderModule } from 'src/app/header/header.module';\nimport { PipeModule } from 'src/app/pipe/pipe.module';\nimport { AddressPipe } from 'src/app/pipe/address/address.pipe';\nimport { WorkDaysPipe } from 'src/app/pipe/workDays/workDays.pipe';\nimport { AnnouncementComponentsModule } from 'src/app/pages/dashboard/component/announcement/announcement-component.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    DashboardPageRoutingModule,\n    HeaderModule,\n    FooterModule,\n    PipeModule,\n    AnnouncementComponentsModule,\n  ],\n  declarations: [DashboardPage],\n  providers: [AddressPipe, WorkDaysPipe],\n})\nexport class DashboardPageModule {}\n","import { Observable, of } from 'rxjs';\nimport { ActivatedRoute } from '@angular/router';\nimport { Announcement, User } from 'src/app/interface';\nimport { Component, OnInit } from '@angular/core';\nimport { AuthService } from 'src/app/services/auth/auth.service';\n\n@Component({\n  selector: 'app-dashboard',\n  templateUrl: './dashboard.page.html',\n  styleUrls: ['./dashboard.page.scss'],\n})\nexport class DashboardPage implements OnInit {\n  public announcement$!: Observable<Announcement[]>;\n  public user!: User;\n\n  constructor(\n    private authService: AuthService,\n    private activatedRoute: ActivatedRoute\n  ) {}\n\n  ngOnInit() {\n    this.init();\n  }\n\n  public init() {\n    this.loadAnnouncement();\n    this.loadUser();\n  }\n\n  private loadUser(): void {\n    if (this.authService.getUser) {\n      this.user = this.authService.getUser;\n    }\n  }\n\n  private loadAnnouncement() {\n    this.announcement$ = of(\n      this.activatedRoute?.snapshot?.data?.['announcement']\n    );\n  }\n}\n","import { HttpErrorResponse } from '@angular/common/http';\nimport { Injectable, OnDestroy } from '@angular/core';\nimport { Observable, EMPTY, Subscription } from 'rxjs';\nimport { catchError, map } from 'rxjs/operators';\n\nimport { Announcement, Category, User } from 'src/app/interface';\nimport { AuthService } from 'src/app/services/auth/auth.service';\nimport { AuthAnnouncementService } from 'src/app/pages/dashboard/auth/announcement/service/auth-announcement.service';\n\n@Injectable()\nexport class AnnouncementResolve implements OnDestroy {\n  private _userId!: number;\n  private $userId!: Subscription;\n  constructor(\n    private authAnnouncementService: AuthAnnouncementService,\n    private authService: AuthService\n  ) {}\n\n  ngOnDestroy(): void {\n    this.$userId.unsubscribe();\n  }\n\n  public get userId(): number {\n    return this._userId;\n  }\n  public set userId(value: number) {\n    this._userId = value;\n  }\n\n  resolve(): Observable<Announcement[]> | void {\n    this.$userId = this.authService.userObservable.subscribe({\n      next: (user: User | void) => {\n        if (user?.id) {\n          this.userId = user.id;\n        }\n      },\n    });\n    if (this.userId) {\n      return this.authAnnouncementService\n        .getAnnouncementFindOne({ userId: this.userId })\n        .pipe(\n          map((item) =>\n            item.map((data: Announcement) => {\n              data.category = {\n                ...data?.categoryAnnouncement?.category,\n                associationId: data?.categoryAnnouncement?.id,\n              } as Category;\n              delete data?.categoryAnnouncement;\n              delete data?.user?.plan;\n              return data;\n            })\n          ),\n          catchError((error: HttpErrorResponse) => {\n            console.log(error);\n            return EMPTY;\n          })\n        );\n    }\n  }\n}\n","import { Category } from './../../../../../../interface/index';\nimport { HttpErrorResponse } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { ActivatedRouteSnapshot } from '@angular/router';\nimport { Observable, EMPTY } from 'rxjs';\nimport { catchError, tap } from 'rxjs/operators';\n\nimport { Announcement, AuthSocial, Plan } from 'src/app/interface';\nimport { ManagementAnnouncementService } from 'src/app/pages/dashboard/auth/announcement/management/service/management.service';\n\n@Injectable()\nexport class AnnouncementGuard {\n  constructor(\n    private managementAnnouncementService: ManagementAnnouncementService\n  ) {}\n  resolve(route: ActivatedRouteSnapshot): Observable<Announcement> | void {\n    const { slug, acao } = route.params;\n    if (slug && !acao) {\n      return this.managementAnnouncementService\n        .findOne(`requirement/management/`, { slug })\n        .pipe(\n          tap((data: Announcement | any) => {\n            if (data) {\n              data.category = {\n                ...data?.categoryAnnouncement?.category,\n              } as Category;\n              data.plan = {\n                ...data?.announcement?.user?.plan,\n              } as Plan;\n              data.authSocial = {\n                ...data?.announcement?.user?.authSocial,\n              } as AuthSocial;\n              delete data?.announcement;\n              delete data?.categoryAnnouncement?.catAdId;\n              delete data?.categoryAnnouncement?.category;\n              delete data?.categoryAnnouncement?.announcementId;\n              delete data?.categoryAnnouncement?.message;\n              this.managementAnnouncementService.setAnnouncement = data;\n              // return data;\n            }\n          }),\n          catchError((error: HttpErrorResponse) => {\n            console.log(error);\n            return EMPTY;\n          })\n        );\n    }\n  }\n}\n"],"names":["NgModule","RouterModule","PrivateAutorizationGuard","DashboardPage","AnnouncementResolve","AnnouncementGuard","routes","path","component","resolve","announcement","canActivate","canLoad","loadChildren","then","m","AnnouncementPageModule","DashboardPageRoutingModule","imports","forChild","exports","providers","CommonModule","FormsModule","IonicModule","FooterModule","HeaderModule","PipeModule","AddressPipe","WorkDaysPipe","AnnouncementComponentsModule","DashboardPageModule","declarations","of","ActivatedRoute","Component","AuthService","constructor","authService","activatedRoute","ngOnInit","init","loadAnnouncement","loadUser","getUser","user","announcement$","snapshot","data","selector","template","Injectable","EMPTY","catchError","map","AuthAnnouncementService","authAnnouncementService","ngOnDestroy","$userId","unsubscribe","userId","_userId","value","userObservable","subscribe","next","id","getAnnouncementFindOne","pipe","item","category","Object","categoryAnnouncement","associationId","plan","error","console","log","tap","ManagementAnnouncementService","managementAnnouncementService","route","slug","acao","params","findOne","authSocial","catAdId","announcementId","message","setAnnouncement"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}