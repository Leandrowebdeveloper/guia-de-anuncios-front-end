"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5757],{76:(O,x,o)=>{o.d(x,{GW:()=>_,dk:()=>e,oK:()=>a});var a=(()=>{return(l=a||(a={})).Prompt="PROMPT",l.Camera="CAMERA",l.Photos="PHOTOS",a;var l})(),_=(()=>{return(l=_||(_={})).Rear="REAR",l.Front="FRONT",_;var l})(),e=(()=>{return(l=e||(e={})).Uri="uri",l.Base64="base64",l.DataUrl="dataUrl",e;var l})()},518:(O,x,o)=>{o.d(x,{L:()=>E});var a=o(655),_=o(3682),e=o(4650),l=o(2156),b=o(6388),c=o(9267),m=o(1228),h=o(6895),v=o(5203);let p=(()=>{class s{transform(n){if(n)return n.reverse()}}return s.\u0275fac=function(n){return new(n||s)},s.\u0275pipe=e.Yjl({name:"reverse",type:s,pure:!0}),s})();var S=o(2089);function t(s,u){1&s&&(e.TgZ(0,"span"),e._uU(1,"Aviso"),e.qZA())}function r(s,u){1&s&&(e.TgZ(0,"span"),e._uU(1,"Informa\xe7\xe3o"),e.qZA())}function f(s,u){1&s&&(e.TgZ(0,"span"),e._uU(1,"Parab\xe9ns"),e.qZA())}function g(s,u){1&s&&(e.TgZ(0,"span"),e._uU(1,"Aten\xe7\xe3o"),e.qZA())}function M(s,u){if(1&s){const n=e.EpF();e.TgZ(0,"ion-fab-button",8),e.NdJ("click",function(){e.CHM(n);const d=e.oxw(),C=d.index,F=d.$implicit,I=e.oxw();return e.KtG(I.close(C,F))}),e._UZ(1,"ion-icon",9),e.qZA()}if(2&s){const n=e.oxw().$implicit;e.Q6J("color",("info"===(null==n?null:n.type)?"secondary":"warning"===(null==n?null:n.type)&&"warning")||"danger"===(null==n?null:n.type)&&"danger"||"success"===(null==n?null:n.type)&&"success")}}function T(s,u){if(1&s){const n=e.EpF();e.TgZ(0,"div")(1,"ion-button",10),e.NdJ("click",function(){e.CHM(n);const d=e.oxw().index,C=e.oxw();return e.KtG(C.update(d))}),e._UZ(2,"ion-icon",11),e._uU(3," editar "),e.qZA()()}}function U(s,u){1&s&&(e.TgZ(0,"div")(1,"ion-button",12),e._UZ(2,"ion-icon",13),e._uU(3," suporte "),e.qZA()())}const A=function(s){return["/painel-de-controle","admin","usuario",s]};function y(s,u){if(1&s&&(e.TgZ(0,"ion-card-content")(1,"ion-item-divider")(2,"ion-label"),e._uU(3,"Remetente"),e.qZA()(),e.TgZ(4,"ion-item",14)(5,"ion-avatar",15),e._UZ(6,"img",16),e.qZA(),e.TgZ(7,"div")(8,"ion-label"),e._uU(9),e.qZA(),e.TgZ(10,"small"),e._uU(11),e.qZA()()()()),2&s){const n=e.oxw().$implicit;e.xp6(4),e.Q6J("routerLink",e.VKq(4,A,null==n||null==n.userSender?null:n.userSender.slug)),e.xp6(2),e.Q6J("src",null!=n&&null!=n.userSender&&n.userSender.image?"/images/avatar/"+(null==n||null==n.userSender||null==n.userSender.image?null:n.userSender.image.filename):"./../../../../../../assets/avatar.svg",e.LSH),e.xp6(3),e.Oqu(null==n||null==n.userSender?null:n.userSender.name),e.xp6(2),e.Oqu(null==n||null==n.userSender?null:n.userSender.email)}}const P=function(s){return{"flex-header":s}};function Z(s,u){if(1&s&&(e.TgZ(0,"ion-card")(1,"ion-card-header",1)(2,"ion-card-title")(3,"span",2),e.YNc(4,t,2,0,"span",3),e.YNc(5,r,2,0,"span",3),e.YNc(6,f,2,0,"span",3),e.YNc(7,g,2,0,"span",3),e.qZA()(),e.YNc(8,M,2,1,"ion-fab-button",4),e.qZA(),e.TgZ(9,"ion-card-content")(10,"p")(11,"em"),e._uU(12),e.ALo(13,"userValues"),e.qZA()(),e._UZ(14,"div",5),e.TgZ(15,"div",6),e.YNc(16,T,4,0,"div",7),e.YNc(17,U,4,0,"div",7),e.qZA()(),e.YNc(18,y,12,6,"ion-card-content",7),e.qZA()),2&s){const n=u.$implicit,i=e.oxw();e.xp6(1),e.Q6J("color",("info"===(null==n?null:n.type)?"secondary":"warning"===(null==n?null:n.type)&&"warning")||"danger"===(null==n?null:n.type)&&"danger"||"success"===(null==n?null:n.type)&&"success")("ngClass",e.VKq(16,P,i.isAdmin||"danger"!==(null==n?null:n.type))),e.xp6(2),e.Q6J("ngSwitch",null==n?null:n.type),e.xp6(1),e.Q6J("ngSwitchCase","warning"),e.xp6(1),e.Q6J("ngSwitchCase","info"),e.xp6(1),e.Q6J("ngSwitchCase","success"),e.xp6(1),e.Q6J("ngSwitchCase","danger"),e.xp6(1),e.Q6J("ngIf",i.isAdmin||"danger"!==(null==n?null:n.type)),e.xp6(4),e.Oqu(e.xi3(13,13,i.user,"name")),e.xp6(2),e.Q6J("innerHtml",null==n?null:n.description,e.oJD),e.xp6(2),e.Q6J("ngIf",i.isAdmin),e.xp6(1),e.Q6J("ngIf",null==n?null:n.response),e.xp6(1),e.Q6J("ngIf",null==n?null:n.userSender)}}let E=(()=>{class s{constructor(n,i,d,C){this.userMessageService=n,this.messageService=i,this.modalController=d,this.authService=C}ngOnInit(){this.init(),this.hasAdmin()}hasAdmin(){const n="1"===this.authService.getLevel;n&&(this.isAdmin=n)}close(n,i){const d={_csrf:this.setCsrf(),id:i?.id};return this.$close=this.userMessageService.close(d).subscribe({next:C=>this.success(n),error:C=>this.messageService.error(C,void 0,this.$close)})}update(n){return(0,a.mG)(this,void 0,void 0,function*(){return yield(yield this.modalController.create({component:_.y,componentProps:{label:"Editar menssagem",data:this.buildDataForm()}})).present()})}buildDataForm(){if(this.user){const{_csrf:n,id:i,messages:d}=this.user;return{_csrf:n,id:i,messages:d}}if(this.announcement){const{_csrf:n,id:i,messages:d}=this.announcement;if(n&&i&&d)return{_csrf:n,id:i,messages:d}}}setCsrf(){var n,i;return(null===(n=this.user)||void 0===n?void 0:n._csrf)||(null===(i=this.announcement)||void 0===i?void 0:i._csrf)}success(n){this.messages.length>0&&(this.messages.splice(n,1),this.$close.unsubscribe())}init(){var n,i;this.user?this.messages=null===(n=this.user)||void 0===n?void 0:n.messages:null!==(i=this.announcement)&&void 0!==i&&i.messages&&(this.messages=this.announcement.messages)}}return s.\u0275fac=function(n){return new(n||s)(e.Y36(l.K),e.Y36(b.e),e.Y36(c.IN),e.Y36(m.e))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-card-message-component"]],inputs:{user:"user",announcement:"announcement"},decls:2,vars:3,consts:[[4,"ngFor","ngForOf"],[1,"ion-margin-bottom",3,"color","ngClass"],[3,"ngSwitch"],[4,"ngSwitchCase"],["size","small",3,"color","click",4,"ngIf"],[1,"ion-margin-top",3,"innerHtml"],[1,"d-flex"],[4,"ngIf"],["size","small",3,"color","click"],["name","close"],["size","small",3,"click"],["slot","start","name","create"],["size","small","color","light"],["slot","start","name","call"],["lines","none","button","",3,"routerLink"],["slot","start"],[3,"src"]],template:function(n,i){1&n&&(e.YNc(0,Z,19,18,"ion-card",0),e.ALo(1,"reverse")),2&n&&e.Q6J("ngForOf",e.lcZ(1,1,i.messages))},dependencies:[h.mk,h.sg,h.O5,h.RF,h.n9,c.BJ,c.YG,c.PM,c.FN,c.Zi,c.Dq,c.W4,c.gu,c.Ie,c.rH,c.Q$,c.YI,v.rH,p,S.g],styles:["ion-card-header.flex-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding-top:0;padding-bottom:0}.d-flex[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-top:32px}"]}),s})()},3682:(O,x,o)=>{o.d(x,{y:()=>v});var a=o(4650),_=o(2156),e=o(3131),l=o(9267),b=o(8039),c=o(6388),m=o(1616),h=o(8404);let v=(()=>{class p{constructor(t,r,f,g,M){this.messagesService=t,this.helpService=r,this.modalController=f,this.loadingService=g,this.messageService=M,this.attrButton={route:"/message",icon:"cloud-upload",label:"Salvar",aria:"Salvar menssagem.",title:"Salvar menssagem."}}ngOnInit(){this.getData()}importForm(t){return this.form=t}onSubmit(t){return this.saveMessage(t)}saveMessage(t){var r,f,g,M,T,U,A,y;const P=this.loadingService.show("Salvando menssagem...");let Z;return null!==(f=null===(r=this.data)||void 0===r?void 0:r.messages[0])&&void 0!==f&&f.userId?(t.value.userId=null===(M=null===(g=this.data)||void 0===g?void 0:g.messages[0])||void 0===M?void 0:M.userId,t.value.id=null===(U=null===(T=this.data)||void 0===T?void 0:T.messages[0])||void 0===U?void 0:U.id,Z="users"):(Z="announcement",t.value.announcementId=null===(y=null===(A=this.data)||void 0===A?void 0:A.messages[0])||void 0===y?void 0:y.announcementId),this.write=this.messagesService.send(t.value,Z).subscribe({next:E=>this.messsage(E,P),error:E=>this.messageService.error(E,P,this.write)})}messsage(t,r){if(t?.message)return this.helpService.delay(()=>this.modalController.dismiss(),2500),this.messageService.success(t?.message,r,this.write)}getData(){const{_csrf:t,messages:r}=this.data;this.config=Object.assign({_csrf:t,password:null},r[0])}}return p.\u0275fac=function(t){return new(t||p)(a.Y36(_.K),a.Y36(e.f),a.Y36(l.IN),a.Y36(b.b),a.Y36(c.e))},p.\u0275cmp=a.Xpm({type:p,selectors:[["ng-component"]],inputs:{data:"data",label:"label",isAuth:"isAuth"},decls:4,vars:4,consts:[[3,"label"],[3,"fullscreen"],["fixed",""],[3,"inputConfig","attrButton","submitDataForm","exportForm"]],template:function(t,r){1&t&&(a._UZ(0,"app-header-component-modal",0),a.TgZ(1,"ion-content",1)(2,"ion-grid",2)(3,"app-form",3),a.NdJ("submitDataForm",function(g){return r.onSubmit(g)})("exportForm",function(g){return r.importForm(g)}),a.qZA()()()),2&t&&(a.Q6J("label",r.label),a.xp6(1),a.Q6J("fullscreen",!0),a.xp6(2),a.Q6J("inputConfig",r.config)("attrButton",r.attrButton))},dependencies:[l.W2,l.jY,m.U,h.s],styles:["ion-content[_ngcontent-%COMP%]{--padding-top: 0px !important}"]}),p})()},9613:(O,x,o)=>{o.d(x,{A:()=>c});var a=o(655),_=o(7423),e=o(76);const l=(0,_.fo)("Camera",{web:()=>o.e(3954).then(o.bind(o,3954)).then(m=>new m.CameraWeb)});var b=o(4650);let c=(()=>{class m{constructor(){this.convertBlobToBase64=v=>new Promise((p,S)=>{const t=new FileReader;t.onerror=S,t.onload=()=>{p(t.result)},t.readAsDataURL(v)})}addPhoto(){return(0,a.mG)(this,void 0,void 0,function*(){try{return yield l.getPhoto({resultType:e.dk.Uri,source:e.oK.Camera,correctOrientation:!0,allowEditing:!0,quality:100,saveToGallery:!0})}catch{}})}readAsBase64(v){return(0,a.mG)(this,void 0,void 0,function*(){const p=(new Date).getTime()+".jpeg",t=yield(yield fetch(v.webPath)).blob(),r=yield this.convertBlobToBase64(t);return{file:yield(yield fetch(r)).blob(),fileName:p}})}}return m.\u0275fac=function(v){return new(v||m)},m.\u0275prov=b.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m})()}}]);