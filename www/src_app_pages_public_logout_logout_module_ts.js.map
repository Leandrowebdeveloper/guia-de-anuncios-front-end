{"version":3,"file":"src_app_pages_public_logout_logout_module_ts.js","mappings":"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","sources":["./src/app/pages/public/logout/logout-routing.module.ts","./src/app/pages/public/logout/logout.module.ts","./src/app/pages/public/logout/logout.page.ts","./src/app/pages/public/logout/service/logout.service.ts","./src/app/utilities/loading/loading.service.ts","./src/app/pages/public/logout/logout.page.scss"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\nimport { PrivateAutorizationGuard } from 'src/app/services/auth/guard/private-autorization/private-autorization.guard';\n\nimport { LogoutPage } from './logout.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    canActivate: [PrivateAutorizationGuard],\n    canLoad: [PrivateAutorizationGuard],\n    component: LogoutPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class LogoutPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { LogoutPageRoutingModule } from './logout-routing.module';\n\nimport { LogoutPage } from './logout.page';\nimport { LogoutService } from './service/logout.service';\nimport { HeaderModule } from 'src/app/header/header.module';\nimport { FooterModule } from 'src/app/footer/footer.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    LogoutPageRoutingModule,\n    HeaderModule,\n    FooterModule\n  ],\n  declarations: [LogoutPage],\n  providers: [LogoutService]\n})\nexport class LogoutPageModule {}\n","import { Subscription } from 'rxjs';\nimport { NavController } from '@ionic/angular';\nimport { Component } from '@angular/core';\nimport { LogoutService } from './service/logout.service';\n\n@Component({\n  selector: 'app-logout',\n  templateUrl: './logout.page.html',\n  styleUrls: ['./logout.page.scss'],\n})\nexport class LogoutPage {\n  private logout!: Subscription;\n  constructor(\n    private navCtrl: NavController,\n    private logoutService: LogoutService\n  ) {}\n\n  public logout_(): Subscription {\n    return (this.logout = this.logoutService\n      .destroySession()\n      .subscribe({ next: () => this.logout.unsubscribe() }));\n  }\n\n  public back(): void {\n    return this.navCtrl.back();\n  }\n}\n","import { MessageService } from 'src/app/utilities/message/message.service';\nimport { HelpsService } from 'src/app/services/helps/helps.service';\nimport { NavController } from '@ionic/angular';\nimport { tap, catchError } from 'rxjs/operators';\nimport { Observable, EMPTY } from 'rxjs';\nimport { Injectable } from '@angular/core';\nimport { HttpService } from 'src/app/services/http/http.service';\nimport { User } from 'src/app/interface/index';\nimport { HttpClient, HttpErrorResponse } from '@angular/common/http';\nimport { AuthService } from 'src/app/services/auth/auth.service';\nimport { StorageService } from 'src/app/services/storage/storage.service';\nimport { LoadingService } from 'src/app/utilities/loading/loading.service';\n\n@Injectable()\nexport class LogoutService extends HttpService<User> {\n  constructor(\n    public override http: HttpClient,\n    public override storageService: StorageService,\n    private authService: AuthService,\n    private navCtrl: NavController,\n    private loadingService: LoadingService,\n    private messageService: MessageService,\n    private helpsService: HelpsService\n  ) {\n    super(http, storageService);\n    this.setApi = `logout`;\n  }\n\n  public destroySession(): Observable<User> {\n    const loading = this.loading();\n    return this.findAll().pipe(\n      tap(\n        (user: User) => this.success(user, loading),\n        catchError((error: HttpErrorResponse) => {\n          this.error(error, loading);\n          return EMPTY;\n        })\n      )\n    );\n  }\n\n  public success(user: User, loading: Promise<HTMLIonLoadingElement>) {\n    this.helpsService.delay(() => {\n      this.setAuthUser(user);\n      this.clearsSessionAndDatabaseStorage();\n    }, 2500);\n    this.disableLoadingAndGoToLoginPage(loading);\n  }\n\n  public async loading(): Promise<HTMLIonLoadingElement> {\n    return await this.loadingService.show('Saindo do sistema...');\n  }\n\n  public async disableLoading(\n    loading: Promise<HTMLIonLoadingElement>\n  ): Promise<number> {\n    return this.helpsService.delay(\n      async () => await (await loading).dismiss(),\n      2000\n    );\n  }\n\n  public async error(\n    error: HttpErrorResponse,\n    loading: Promise<HTMLIonLoadingElement>\n  ) {\n    await this.disableLoading(loading);\n    return this.messageService.error(error);\n  }\n\n  private async disableLoadingAndGoToLoginPage(\n    loading: Promise<HTMLIonLoadingElement>\n  ) {\n    await this.disableLoading(loading);\n    return await this.goToLoginPage();\n  }\n\n  private async goToLoginPage(): Promise<number> {\n    return this.helpsService.delay(\n      async () => await this.navCtrl.navigateForward('/entrar'),\n      2500\n    );\n  }\n\n  private clearsSessionAndDatabaseStorage(): void {\n    this.removeTokenStorageSession();\n    this.removeTokenStorageDatabase();\n  }\n\n  private removeTokenStorageSession(): void {\n    return sessionStorage.removeItem('token');\n  }\n\n  private removeTokenStorageDatabase(): void {\n    return this.storageService.clean();\n  }\n\n  private setAuthUser(user: User): User {\n    this.authService.setUser = user;\n    this.authService.setApi = '';\n    return (this.authService.setIsLoggedIn = user);\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { LoadingController } from '@ionic/angular';\n\n@Injectable({\n    providedIn: 'root',\n})\n/**\n * @class LoadingService\n */\nexport class LoadingService {\n    constructor(private loadingController: LoadingController) {}\n\n    public async show(message: string): Promise<HTMLIonLoadingElement> {\n        const loading = this.loadingController.create({\n            message,\n            spinner: 'bubbles',\n        });\n        (await loading).present();\n        return loading;\n    }\n}\n","// Imports\nvar ___CSS_LOADER_API_SOURCEMAP_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\");\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\", \"\",{\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"sourceRoot\":\"\"}]);\n// Exports\nmodule.exports = ___CSS_LOADER_EXPORT___.toString();\n"],"names":["NgModule","RouterModule","PrivateAutorizationGuard","LogoutPage","routes","path","canActivate","canLoad","component","LogoutPageRoutingModule","imports","forChild","exports","CommonModule","FormsModule","IonicModule","LogoutService","HeaderModule","FooterModule","LogoutPageModule","declarations","providers","NavController","Component","constructor","navCtrl","logoutService","logout_","logout","destroySession","subscribe","next","unsubscribe","back","selector","template","MessageService","HelpsService","tap","catchError","EMPTY","Injectable","HttpService","HttpClient","AuthService","StorageService","LoadingService","http","storageService","authService","loadingService","messageService","helpsService","setApi","loading","findAll","pipe","user","success","error","delay","setAuthUser","clearsSessionAndDatabaseStorage","disableLoadingAndGoToLoginPage","show","disableLoading","__awaiter","dismiss","goToLoginPage","navigateForward","removeTokenStorageSession","removeTokenStorageDatabase","sessionStorage","removeItem","clean","setUser","setIsLoggedIn","LoadingController","loadingController","message","create","spinner","present","providedIn"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}