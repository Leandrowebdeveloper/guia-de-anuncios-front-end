<form [formGroup]="form" (ngSubmit)="onSubmit()">
  <div *ngFor="let input of buildInputs">
    <div
      *ngIf="
        input?.type !== 'checkbox' &&
        input?.name !== 'level' &&
        input?.name !== 'city'
      "
    >
      <ion-item>
        <!-- Label -->
        <ion-label
          position="floating"
          [color]="f[input?.name].valid && 'success'"
        >
          {{ input?.label }}

          <!-- Message error -->
          <ion-text color="danger" *ngIf="submitted && f[input?.name].errors">
            <span
              *ngIf="f[input?.name].errors.pattern"
              [attr.aria-errormessage]="input.msg?.invalid"
              >{{ input.msg?.invalid }}&nbsp;</span
            >
            <span
              *ngIf="f[input?.name].errors.email"
              [attr.aria-errormessage]="input.msg?.invalid"
            >
              *{{ input.msg?.invalid }}&nbsp;</span
            >
            <span
              *ngIf="f[input?.name].errors.required"
              [attr.aria-errormessage]="input.msg?.empty"
            >
              *{{ input.msg?.empty }}&nbsp;</span
            >
            <span
              *ngIf="f[input?.name].errors.maxlength"
              [attr.aria-errormessage]="input?.msg?.max"
            >
              *{{ input?.msg?.max }}&nbsp;</span
            >
            <span
              *ngIf="f[input?.name].errors.minlength"
              [attr.aria-errormessage]="input?.msg?.min"
            >
              *{{ input?.msg?.min }}&nbsp;</span
            >
            <span
              *ngIf="f[input?.name].errors?.mustMatch"
              [attr.aria-errormessage]="input?.msg?.mustMatch"
            >
              *{{ input?.msg?.mustMatch }}&nbsp;</span
            >
          </ion-text>
        </ion-label>

        <!-- Level -->

        <ion-input
          *ngIf="
            input?.type !== 'tel' &&
            input?.name !== 'description' &&
            input?.name !== 'complement' &&
            input?.name !== 'zip_code' &&
            input?.name !== 'city'
          "
          [type]="visiblePassword ? 'text' : input?.type"
          [formControlName]="input?.name"
          [inputmode]="input?.type"
          [placeholder]="input?.placeholder"
          [attr.aria-invalid]="submitted"
          [attr.aria-placeholder]="input?.actionLabel"
          [readonly]="input?.readonly"
          [attr.aria-readonly]="input?.readonly"
        >
        </ion-input>

        <ion-input
          *ngIf="input?.type === 'tel' && input?.name === 'phone'"
          [type]="input?.type"
          [formControlName]="input?.name"
          [inputmode]="input?.type"
          [placeholder]="input?.placeholder"
          [attr.aria-invalid]="submitted"
          [attr.aria-placeholder]="input?.actionLabel"
          maxlength="13"
          minlength="13"
          mask="(**)****-****"
        >
        </ion-input>

        <ion-input
          *ngIf="input?.type === 'tel' && input?.name !== 'phone'"
          [type]="input?.type"
          [formControlName]="input?.name"
          [inputmode]="input?.type"
          [placeholder]="input?.placeholder"
          [attr.aria-invalid]="submitted"
          [attr.aria-placeholder]="input?.actionLabel"
          maxlength="15"
          minlength="15"
          mask="(**)***-***-***"
        >
        </ion-input>

        <ion-input
          *ngIf="input?.name === 'zip_code'"
          [type]="visiblePassword ? 'text' : input?.type"
          [formControlName]="input?.name"
          [inputmode]="input?.type"
          [placeholder]="input?.placeholder"
          [attr.aria-invalid]="submitted"
          [attr.aria-placeholder]="input?.actionLabel"
          maxlength="10"
          minlength="10"
          mask="**.***-***"
        >
        </ion-input>

        <ion-textarea
          *ngIf="input?.name === 'complement'"
          [formControlName]="input?.name"
          [inputmode]="input?.type"
          [placeholder]="input?.placeholder"
          [attr.aria-placeholder]="input?.actionLabel"
          rows="8"
        ></ion-textarea>

        <!-- Button display password -->
        <ion-button
          *ngIf="
            input?.name === 'passwordConfirmation' ||
            (input?.name === 'password' && attrButton?.route === '/entrar')
          "
          slot="end"
          fill="clear"
          (click)="showPassword()"
          class="ion-margin-top"
          [title]="visiblePassword ? 'Ocultar senha' : 'Ver senha'"
          [attr.aria-pressed]="visiblePassword"
          [attr.aria-label]="attrButton?.aria"
        >
          <ion-icon
            [name]="visiblePassword ? 'eye-off-outline' : 'eye-outline'"
            color="medium"
          ></ion-icon>
        </ion-button>
      </ion-item>

      <!-- Password -->
      <app-password-strength
        *ngIf="
          input?.name === 'passwordConfirmation' ||
          (input?.name === 'password' && attrButton?.route === 'login')
        "
        [passwordToCheck]="form.value.password"
        [hidden]="isPageTheLogin"
      ></app-password-strength>
    </div>

    <!-- Level OR Cities -->
    <ion-list *ngIf="input?.name === 'level' || input?.name === 'city'">
      <ion-radio-group [formControlName]="input?.name">
        <span *ngIf="input?.name === 'level'; else City">
          <ion-item>
            <ion-label>Colaborador</ion-label>
            <ion-radio value="2"></ion-radio>
          </ion-item>

          <ion-item>
            <ion-label>Administrador</ion-label>
            <ion-radio value="1"></ion-radio>
          </ion-item>
        </span>
        <ng-template #City>
          <ion-item>
            <ion-label>São Luiz dos Montes Belos</ion-label>
            <ion-radio value="São Luiz dos Montes Belos"></ion-radio>
          </ion-item>

          <ion-item>
            <ion-label>Firminópolis</ion-label>
            <ion-radio value="Firminópolis"></ion-radio>
          </ion-item>
          <ion-item>
            <ion-label>Aurilândia</ion-label>
            <ion-radio value="Aurilândia"></ion-radio>
          </ion-item>
          <ion-item>
            <ion-label>Sanclerlândia</ion-label>
            <ion-radio value="Sanclerlândia"></ion-radio>
          </ion-item>
          <ion-item>
            <ion-label>Turvânia</ion-label>
            <ion-radio value="Turvânia"></ion-radio>
          </ion-item>
          <ion-item>
            <ion-label>Córrego do Ouro</ion-label>
            <ion-radio value="Córrego do Ouro"></ion-radio>
          </ion-item>
        </ng-template>
      </ion-radio-group>
    </ion-list>

    <ion-item
      lines="none"
      *ngIf="input?.name === 'stayConnected'"
      [hidden]="!isPageTheLogin"
    >
      <ion-checkbox
        [formControlName]="input?.name"
        [attr.aria-label]="input?.label"
      >
      </ion-checkbox>
      <ion-text class="ion-margin-start">{{ input?.label }}</ion-text>
    </ion-item>

    <!-- terms -->
    <div *ngIf="input?.name === 'terms'">
      <ion-item lines="none">
        <ion-checkbox
          [formControlName]="input?.name"
          [attr.aria-label]="input?.label"
        >
        </ion-checkbox>
        <ion-text class="ion-margin-start">{{ input?.label }}</ion-text>
      </ion-item>

      <div class="ion-text-start" *ngIf="submitted && f[input?.name].errors">
        <ion-text color="danger" *ngIf="!form.controls['terms'].valid">
          <small [attr.aria-errormessage]="input?.msg?.invalid">{{
            input?.msg?.invalid
          }}</small>
        </ion-text>
      </div>

      <ion-text class="cursor" color="secondary">
        <small
          class="cursor-pointer ion-margin-start"
          title="Ver termos de uso do jussara.app."
          routerLink="/termos-de-uso"
          data-label="Ver termos de uso?"
        >
          Ver termos de uso?
        </small>
      </ion-text>
    </div>
  </div>

  <ion-button
    *ngIf="buildInputs.length > 0"
    color="tertiary"
    type="submit"
    expand="block"
    class="ion-margin-vertical"
    [fill]="attrButton?.fill ? 'outline' : 'solid'"
    [attr.aria-label]="attrButton?.aria"
    [title]="attrButton?.title"
  >
    <ion-icon class="ion-margin-end" [name]="attrButton?.icon"></ion-icon>
    {{ attrButton?.label }}
  </ion-button>
</form>
